<app-header></app-header>
<main *ngIf="adminCookie">
    <section *ngIf="!editMode && !addMode">
        <h3>{{ "cafeteria.menuEditing" | translate }}</h3>
        <article>
            <div>
                <p><b> {{ "cafeteria.dishName" | translate }} </b></p>
                <p><b> {{ "cafeteria.serviceDate" | translate }} </b></p>
                <p><b> {{ "cafeteria.dishType" | translate }} </b></p>
                <p><b> {{ "cafeteria.price" | translate }} </b></p>
                <p (click)="add()"><i class="fa-solid fa-plus pointer" style="color: #000000;"></i></p>
                <p (click)="edit()"><i class="fa-solid fa-pencil pointer" style="color: black;"></i></p>
            </div>
        </article>
        <article *ngFor="let item of first; let i = index">
            <div id="ID{{item.dishId}}">
                <p> {{ item.name }} </p>
                <p> {{ item.date }} </p>
                <p> {{ "cafeteria.starters" | translate }} </p>
                <p> {{ item.price }} € </p>
            </div>
        </article>
        <article *ngFor="let item of second; let i = index">
            <div id="ID{{item.dishId}}">
                <p> {{ item.name }} </p>
                <p> {{ item.date }} </p>
                <p> {{ "cafeteria.entrees" | translate }} </p>
                <p> {{ item.price }} € </p>
            </div>
        </article>
        <article *ngFor="let item of poke; let i = index">
            <div id="ID{{item.dishId}}">
                <p> {{ item.name }} </p>
                <p> {{ item.date }} </p>
                <p> {{ "cafeteria.poke" | translate }} </p>
                <p> {{ item.price }} € </p>
            </div>
        </article>
    </section>
    <section *ngIf="editMode">
        <h3>{{ "cafeteria.menuEditing" | translate }}</h3>
        <article>
            <div>
                <p><b> {{ "cafeteria.dishName" | translate }} </b></p>
                <p><b> {{ "cafeteria.serviceDate" | translate }} </b></p>
                <p><b> {{ "cafeteria.dishType" | translate }} </b></p>
                <p><b> {{ "cafeteria.price" | translate }} </b></p>
                <p> </p>
                <p (click)="edit()"><i class="fa-regular fa-circle-xmark pointer" style="color: black; font-size: 24px;"></i></p>
            </div>
        </article>
        <article *ngFor="let item of first; let i = index">
            <div id="ID{{item.dishId}}">
                <input [(ngModel)]="item.name" type="text" name="name" (blur)="dishChanges(item)">
                <input [(ngModel)]="item.date" type="date" name="date" (blur)="dishChanges(item)">
                <input [(ngModel)]="item.name" type="text" name="name" (blur)="dishChanges(item)">
                <input [(ngModel)]="item.date" type="date" name="date" (blur)="dishChanges(item)">
                <select [(ngModel)]="item.type" name="type" (blur)="dishChanges(item)">
                    <option value="First"> {{ "cafeteria.starters" | translate }} </option>
                    <option value="Second"> {{ "cafeteria.entrees" | translate }} </option>
                    <option value="Poke"> {{ "cafeteria.poke" | translate }} </option>
                </select>
                <input [(ngModel)]="item.price" type="text" name="price" (blur)="dishChanges(item)">
                <button (click)="deleteDish(item.dishId, item.name, item.date)"><i class="fa-solid fa-trash-can pointer"></i></button>
            </div>
        </article>
        <article *ngFor="let item of second; let i = index">
            <div id="ID{{item.dishId}}">
                <input [(ngModel)]="item.name" type="text" name="name" (blur)="dishChanges(item)">
                <input [(ngModel)]="item.date" type="date" name="date" (blur)="dishChanges(item)">
                <input [(ngModel)]="item.name" type="text" name="name" (blur)="dishChanges(item)">
                <input [(ngModel)]="item.date" type="date" name="date" (blur)="dishChanges(item)">
                <select [(ngModel)]="item.type" name="type" (blur)="dishChanges(item)">
                    <option value="First"> {{ "cafeteria.starters" | translate }} </option>
                    <option value="Second"> {{ "cafeteria.entrees" | translate }} </option>
                    <option value="Poke"> {{ "cafeteria.poke" | translate }} </option>
                </select>
                <input [(ngModel)]="item.price" type="text" name="price" (blur)="dishChanges(item)">
                <button (click)="deleteDish(item.dishId, item.name, item.date)"><i class="fa-solid fa-trash-can pointer"></i></button>
            </div>
        </article>
        <article *ngFor="let item of poke; let i = index">
            <div id="ID{{item.dishId}}">
                <input [(ngModel)]="item.name" type="text" name="name" (blur)="dishChanges(item)">
                <input [(ngModel)]="item.date" type="date" name="date" (blur)="dishChanges(item)">
                <select [(ngModel)]="item.type" name="type" (blur)="dishChanges(item)">
                    <option value="First"> {{ "cafeteria.starters" | translate }} </option>
                    <option value="Second"> {{ "cafeteria.entrees" | translate }} </option>
                    <option value="Poke"> {{ "cafeteria.poke" | translate }} </option>
                </select>
                <input [(ngModel)]="item.price" type="text" name="price" (blur)="dishChanges(item)">
                <button (click)="deleteDish(item.dishId, item.name, item.date)"><i class="fa-solid fa-trash-can pointer"></i></button>
            </div>
        </article>
    </section>
    <section *ngIf="addMode">
        <h3>{{ "cafeteria.menuEditing" | translate }}</h3>
        <article>
            <div>
                <p><b> {{ "cafeteria.dishName" | translate }} </b></p>
                <p><b> {{ "cafeteria.serviceDate" | translate }} </b></p>
                <p><b> {{ "cafeteria.dishType" | translate }} </b></p>
                <p><b> {{ "cafeteria.price" | translate }} </b></p>
                <p> </p>
                <p (click)="add()"><i class="fa-regular fa-circle-xmark pointer" style="color: black; font-size: 24px;"></i></p>
            </div>
        </article>
        <article>
            <div>
                <input [(ngModel)]="newName" type="text" name="name">
                <input [(ngModel)]="newDate" type="date" name="date" min={{date}}>
                <select [(ngModel)]="newType" name="type">
                    <option value="First"> {{ "cafeteria.starters" | translate }} </option>
                    <option value="Second"> {{ "cafeteria.entrees" | translate }} </option>
                    <option value="Poke"> {{ "cafeteria.poke" | translate }} </option>
                </select>
                <input [(ngModel)]="newPrice" type="text" name="price">
                <button (click)="addDish()"><i class="fa-solid fa-check pointer"></i></button>
            </div>
        </article>
    </section>
    <section *ngIf="addMode">
        <h3>{{ "cafeteria.menuEditing" | translate }}</h3>
        <article>
            <div>
                <p><b> {{ "cafeteria.dishName" | translate }} </b></p>
                <p><b> {{ "cafeteria.serviceDate" | translate }} </b></p>
                <p><b> {{ "cafeteria.dishType" | translate }} </b></p>
                <p><b> {{ "cafeteria.price" | translate }} </b></p>
                <p> </p>
                <p (click)="add()"><i class="fa-regular fa-circle-xmark" style="color: black; font-size: 24px;"></i></p>
            </div>
        </article>
        <article>
            <div>
                <input [(ngModel)]="newName" type="text" name="name">
                <input [(ngModel)]="newDate" type="date" name="date" min={{date}}>
                <select [(ngModel)]="newType" name="type">
                    <option value="First"> {{ "cafeteria.starters" | translate }} </option>
                    <option value="Second"> {{ "cafeteria.entrees" | translate }} </option>
                    <option value="Poke"> {{ "cafeteria.poke" | translate }} </option>
                </select>
                <input [(ngModel)]="newPrice" type="text" name="price">
                <button (click)="addDish()"><i class="fa-solid fa-check"></i></button>
            </div>
        </article>
    </section>
</main>
<main *ngIf="!adminCookie">
    <p> {{ "cafeteria.credentials.part1" | translate }} <a routerLink="/access">{{ "cafeteria.credentials.part2" | translate }}</a> {{ "cafeteria.credentials.part3" | translate }} </p>    
</main>
<app-footer [ngClass]="!adminCookie || addMode ? 'notFullPage' : ''"></app-footer>